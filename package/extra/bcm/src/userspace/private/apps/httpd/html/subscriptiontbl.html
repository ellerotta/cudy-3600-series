<html>
  <head>
    <meta charset='utf-8'>
    <title>Subscription Table</title>
    <link rel='stylesheet' href='tabletab.css' type='text/css'>
    <script src='jquery.js'></script>
    <script type='text/javascript'>
      var sessionKey='<%ejGetOther(sessionKey)%>';

      function addClick() {
        var loc = 'subscriptioncfg.cgi?uspAction=add';

        loc += '&sessionKey=' + sessionKey;

        location.href = loc;
      }

      function editClick(val) {
        var loc = 'subscriptioncfg.cgi?uspAction=edit&uspInfo=' + val;

        loc += '&sessionKey=' + sessionKey;

        location.href = loc;
      }

      function removeClick(rml) {
        var lst = '';

        if (rml.length > 0)
          for (i = 0; i < rml.length; i++) {
            if ( rml[i].checked == true )
              lst += rml[i].value + ',';
          }
        else if ( rml.checked == true )
          lst = rml.value;

        var loc = 'subscriptiontbl.cgi?uspAction=remove&uspInfo=' + lst;

        loc += '&sessionKey=' + sessionKey;

        location.href = loc;
      }
   </script>
  </head>
  <body>
  <form>
    <center><h3>Subscription Table</h3><br>
    <div><center>
    <table id='subscriptionTbl' border='1' cellpadding='4' cellspacing='0'>
      <tbody>
        <tr align='center'>
          <td class='hd'>Enable</td>
          <td class='hd'>ID</td>
          <td class='hd'>Recipient</td>
          <td class='hd'>Reference List</td>
          <td class='hd'>Persistent</td>
          <td class='hd'>Notify Type</td>
          <td class='hd'>Notify Retry</td>
          <td class='hd'>Notify Expiration (seconds)</td>
          <td class='hd'>Edit</td>
          <td class='hd'>Remove</td>
        </tr>
<%ejGetOther(uspGetSubscriptionTable)%>
      </tbody>
    </table>
    <br><br>
    <input type='button' value='Add' onclick='addClick()'>
    <input type='button' value='Remove' onclick='removeClick(this.form.rml)'>
    <br><br>
    </div>
  </form>
  </body>
</html>
