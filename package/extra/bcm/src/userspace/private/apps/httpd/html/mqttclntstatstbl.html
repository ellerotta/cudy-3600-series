<html>
  <head>
    <meta charset='utf-8'>
    <title>MQTT Client Statistics</title>
    <link rel='stylesheet' href='tabletab.css' type='text/css'>
    <script src='jquery.js'></script>
    <script>
      var sessionKey='<%ejGetOther(sessionKey)%>';
      var uspAction='<%ejGet(uspAction)%>';
      var uspInfo='<%ejGet(uspInfo)%>';

      function getClick() {
        var val = document.getElementById('clntAlias').value;
        var loc = 'mqttclntstatstbl.cgi?';

        // validate input
        if (val == '') {
          alert('Client alias cannot be empty.');
          return;
        }

        loc += 'uspAction=get&uspInfo=' + val;

        loc += '&sessionKey=' + sessionKey;

        location.href = loc;
      }


      function bodyLoad() {
        document.getElementById('clntAlias').value = uspInfo;
      }
    </script>
  </head>
  <body onload='bodyLoad()'>
  <form>
    <center><h3>MQTT Client Statistics</h3><br>
    <div><center>
    <table border='1' cellpadding='4' cellspacing='0'>
      <tbody>
        <tr>
          <td class='hd'>Client Name</td>
          <td>
            <select id='clntAlias'>
              <option value='' selected='selected'></option>
<%ejGetOther(uspGetMqttClientNameList)%>
            </select>
          </td>
        </tr>
      </tbody>
    </table>
    <br><br>
    <table  border='1' cellpadding='4' cellspacing='0'>
      <tbody>
        <tr align='center'>
          <td class='hd'>Broker Connection Established</td>
          <td class='hd'>Last Publish Message Sent</td>
          <td class='hd'>Last Publish Message Received</td>
          <td class='hd'>Publish Sent</td>
          <td class='hd'>Publish Received</td>
          <td class='hd'>Subscribe Sent</td>
          <td class='hd'>UnSubscribe Sent</td>
          <td class='hd'>MQTT Messages Sent</td>
          <td class='hd'>MQTT Messages Received</td>
          <td class='hd'>Connection Errors</td>
          <td class='hd'>Publish Errors</td>
        </tr>
<%ejGetOther(uspGetMqttClientStatsTable)%>
      </tbody>
    </table>
    </div>
    <br><br>
    <input type='button' value='Get Statistics' onclick='getClick()'>
    <br><br>
  </form>
  </body>
</html>
